<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">vueæ’æ§½ï¼Œä½ æƒ³äº†è§£çš„éƒ½åœ¨è¿™é‡Œ | æ·±å…¥å‰–æVueæºç </title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://your-docusaurus-test-site.com/blog-vue-source/vueæ’æ§½ï¼Œä½ æƒ³äº†è§£çš„éƒ½åœ¨è¿™é‡Œ"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="vueæ’æ§½ï¼Œä½ æƒ³äº†è§£çš„éƒ½åœ¨è¿™é‡Œ | æ·±å…¥å‰–æVueæºç "><meta data-react-helmet="true" name="description" content="Vueç»„ä»¶çš„å¦ä¸€ä¸ªé‡è¦æ¦‚å¿µæ˜¯æ’æ§½ï¼Œå®ƒå…è®¸ä½ ä»¥ä¸€ç§ä¸åŒäºä¸¥æ ¼çš„çˆ¶å­å…³ç³»çš„æ–¹å¼ç»„åˆç»„ä»¶ã€‚æ’æ§½ä¸ºä½ æä¾›äº†ä¸€ä¸ªå°†å†…å®¹æ”¾ç½®åˆ°æ–°ä½ç½®æˆ–ä½¿ç»„ä»¶æ›´é€šç”¨çš„å‡ºå£ã€‚è¿™ä¸€èŠ‚å°†å›´ç»•å®˜ç½‘å¯¹æ’æ§½å†…å®¹çš„ä»‹ç»æ€è·¯ï¼ŒæŒ‰ç…§æ™®é€šæ’æ§½ï¼Œå…·åæ’æ§½ï¼Œå†åˆ°ä½œç”¨åŸŸæ’æ§½çš„æ€è·¯ï¼Œé€æ­¥æ·±å…¥å†…éƒ¨çš„å®ç°åŸç†,æœ‰å¯¹æ’æ§½ä½¿ç”¨ä¸ç†Ÿæ‚‰çš„ï¼Œå¯ä»¥å…ˆå‚è€ƒå®˜ç½‘å¯¹æ’æ§½çš„ä»‹ç»ã€‚"><meta data-react-helmet="true" property="og:description" content="Vueç»„ä»¶çš„å¦ä¸€ä¸ªé‡è¦æ¦‚å¿µæ˜¯æ’æ§½ï¼Œå®ƒå…è®¸ä½ ä»¥ä¸€ç§ä¸åŒäºä¸¥æ ¼çš„çˆ¶å­å…³ç³»çš„æ–¹å¼ç»„åˆç»„ä»¶ã€‚æ’æ§½ä¸ºä½ æä¾›äº†ä¸€ä¸ªå°†å†…å®¹æ”¾ç½®åˆ°æ–°ä½ç½®æˆ–ä½¿ç»„ä»¶æ›´é€šç”¨çš„å‡ºå£ã€‚è¿™ä¸€èŠ‚å°†å›´ç»•å®˜ç½‘å¯¹æ’æ§½å†…å®¹çš„ä»‹ç»æ€è·¯ï¼ŒæŒ‰ç…§æ™®é€šæ’æ§½ï¼Œå…·åæ’æ§½ï¼Œå†åˆ°ä½œç”¨åŸŸæ’æ§½çš„æ€è·¯ï¼Œé€æ­¥æ·±å…¥å†…éƒ¨çš„å®ç°åŸç†,æœ‰å¯¹æ’æ§½ä½¿ç”¨ä¸ç†Ÿæ‚‰çš„ï¼Œå¯ä»¥å…ˆå‚è€ƒå®˜ç½‘å¯¹æ’æ§½çš„ä»‹ç»ã€‚"><link data-react-helmet="true" rel="shortcut icon" href="/blog-vue-source/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://your-docusaurus-test-site.com/blog-vue-source/vueæ’æ§½ï¼Œä½ æƒ³äº†è§£çš„éƒ½åœ¨è¿™é‡Œ"><link data-react-helmet="true" rel="alternate" href="https://your-docusaurus-test-site.com/blog-vue-source/vueæ’æ§½ï¼Œä½ æƒ³äº†è§£çš„éƒ½åœ¨è¿™é‡Œ" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://your-docusaurus-test-site.com/blog-vue-source/vueæ’æ§½ï¼Œä½ æƒ³äº†è§£çš„éƒ½åœ¨è¿™é‡Œ" hreflang="x-default"><link rel="stylesheet" href="/blog-vue-source/assets/css/styles.6d09dbb1.css">
<link rel="preload" href="/blog-vue-source/assets/js/runtime~main.0ee6c1f0.js" as="script">
<link rel="preload" href="/blog-vue-source/assets/js/main.d722cc53.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/blog-vue-source/"><img src="/blog-vue-source/img/logo.svg" alt="æ·±å…¥å‰–æVueæºç " class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/blog-vue-source/img/logo.svg" alt="æ·±å…¥å‰–æVueæºç " class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">æ·±å…¥å‰–æVueæºç </b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Ocean1509/In-depth-analysis-of-Vue" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/blog-vue-source/">Introduction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/blog-vue-source/ç›®å½•">ç›®å½•</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/blog-vue-source/ä¸°å¯Œçš„é€‰é¡¹åˆå¹¶ç­–ç•¥">ä¸°å¯Œçš„é€‰é¡¹åˆå¹¶ç­–ç•¥</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/blog-vue-source/åŸºç¡€çš„æ•°æ®ä»£ç†æ£€æµ‹">åŸºç¡€çš„æ•°æ®ä»£ç†æ£€æµ‹</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/blog-vue-source/å®ä¾‹æŒ‚è½½æµç¨‹å’Œæ¨¡æ¿ç¼–è¯‘">å®ä¾‹æŒ‚è½½æµç¨‹å’Œæ¨¡æ¿ç¼–è¯‘</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/blog-vue-source/å®Œæ•´æ¸²æŸ“æµç¨‹">å®Œæ•´æ¸²æŸ“æµç¨‹</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/blog-vue-source/ç»„ä»¶åŸºç¡€å‰–æ">ç»„ä»¶åŸºç¡€å‰–æ</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/blog-vue-source/ç»„ä»¶é«˜çº§ç”¨æ³•">ç»„ä»¶é«˜çº§ç”¨æ³•</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/blog-vue-source/æ·±å…¥å“åº”å¼ç³»ç»Ÿæ„å»º-ä¸Š">æ·±å…¥å“åº”å¼ç³»ç»Ÿæ„å»º-ä¸Š</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/blog-vue-source/æ·±å…¥å“åº”å¼ç³»ç»Ÿæ„å»º-ä¸‹">æ·±å…¥å“åº”å¼ç³»ç»Ÿæ„å»º-ä¸‹</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/blog-vue-source/æ·±å…¥å“åº”å¼ç³»ç»Ÿæ„å»º-ä¸­">æ·±å…¥å“åº”å¼ç³»ç»Ÿæ„å»º-ä¸­</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/blog-vue-source/æ¥ï¼Œè·Ÿæˆ‘ä¸€èµ·å®ç°diffç®—æ³•">æ¥ï¼Œè·Ÿæˆ‘ä¸€èµ·å®ç°diffç®—æ³•</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/blog-vue-source/æ­ç§˜Vueçš„äº‹ä»¶æœºåˆ¶">æ­ç§˜Vueçš„äº‹ä»¶æœºåˆ¶</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/blog-vue-source/vueæ’æ§½ï¼Œä½ æƒ³äº†è§£çš„éƒ½åœ¨è¿™é‡Œ">vueæ’æ§½ï¼Œä½ æƒ³äº†è§£çš„éƒ½åœ¨è¿™é‡Œ</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/blog-vue-source/ä½ çœŸçš„äº†è§£v-modelçš„è¯­æ³•ç³–äº†å—">ä½ çœŸçš„äº†è§£v-modelçš„è¯­æ³•ç³–äº†å—</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/blog-vue-source/åŠ¨æ€ç»„ä»¶çš„æ·±å…¥åˆ†æ">åŠ¨æ€ç»„ä»¶çš„æ·±å…¥åˆ†æ</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/blog-vue-source/å½»åº•ææ‡‚Vueä¸­keep-aliveçš„é­”æ³•-ä¸Š">å½»åº•ææ‡‚Vueä¸­keep-aliveçš„é­”æ³•-ä¸Š</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/blog-vue-source/å½»åº•ææ‡‚Vueä¸­keep-aliveçš„é­”æ³•-ä¸‹">å½»åº•ææ‡‚Vueä¸­keep-aliveçš„é­”æ³•-ä¸‹</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>vueæ’æ§½ï¼Œä½ æƒ³äº†è§£çš„éƒ½åœ¨è¿™é‡Œ</h1></header><blockquote><p>Vueç»„ä»¶çš„å¦ä¸€ä¸ªé‡è¦æ¦‚å¿µæ˜¯æ’æ§½ï¼Œå®ƒå…è®¸ä½ ä»¥ä¸€ç§ä¸åŒäºä¸¥æ ¼çš„çˆ¶å­å…³ç³»çš„æ–¹å¼ç»„åˆç»„ä»¶ã€‚æ’æ§½ä¸ºä½ æä¾›äº†ä¸€ä¸ªå°†å†…å®¹æ”¾ç½®åˆ°æ–°ä½ç½®æˆ–ä½¿ç»„ä»¶æ›´é€šç”¨çš„å‡ºå£ã€‚è¿™ä¸€èŠ‚å°†å›´ç»•å®˜ç½‘å¯¹æ’æ§½å†…å®¹çš„ä»‹ç»æ€è·¯ï¼ŒæŒ‰ç…§æ™®é€šæ’æ§½ï¼Œå…·åæ’æ§½ï¼Œå†åˆ°ä½œç”¨åŸŸæ’æ§½çš„æ€è·¯ï¼Œé€æ­¥æ·±å…¥å†…éƒ¨çš„å®ç°åŸç†,æœ‰å¯¹æ’æ§½ä½¿ç”¨ä¸ç†Ÿæ‚‰çš„ï¼Œå¯ä»¥å…ˆå‚è€ƒå®˜ç½‘å¯¹<a href="https://cn.vuejs.org/v2/guide/components-slots.html" target="_blank" rel="noopener noreferrer">æ’æ§½</a>çš„ä»‹ç»ã€‚</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="101-æ™®é€šæ’æ§½"></a>10.1 æ™®é€šæ’æ§½<a class="hash-link" href="#101-æ™®é€šæ’æ§½" title="Direct link to heading">#</a></h2><p>æ’æ§½å°†<code>&lt;slot&gt;&lt;/slot&gt;</code>ä½œä¸ºå­ç»„ä»¶æ‰¿è½½åˆ†å‘çš„è½½ä½“ï¼Œç®€å•çš„ç”¨æ³•å¦‚ä¸‹</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="1011-åŸºç¡€ç”¨æ³•"></a>10.1.1 åŸºç¡€ç”¨æ³•<a class="hash-link" href="#1011-åŸºç¡€ç”¨æ³•" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">var child = {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  template: `&lt;div class=&quot;child&quot;&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/div&gt;`</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">var vm = new Vue({</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  el: &#x27;#app&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  components: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    child</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  template: `&lt;div id=&quot;app&quot;&gt;&lt;child&gt;test&lt;/child&gt;&lt;/div&gt;`</span></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// æœ€ç»ˆæ¸²æŸ“ç»“æœ</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;div class=&quot;child&quot;&gt;test&lt;/div&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="1012-ç»„ä»¶æŒ‚è½½åŸç†"></a>10.1.2 ç»„ä»¶æŒ‚è½½åŸç†<a class="hash-link" href="#1012-ç»„ä»¶æŒ‚è½½åŸç†" title="Direct link to heading">#</a></h3><p>æ’æ§½çš„åŸç†ï¼Œè´¯ç©¿äº†æ•´ä¸ªç»„ä»¶ç³»ç»Ÿç¼–è¯‘åˆ°æ¸²æŸ“çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥é¦–å…ˆéœ€è¦å›é¡¾ä¸€ä¸‹å¯¹ç»„ä»¶ç›¸å…³ç¼–è¯‘æ¸²æŸ“æµç¨‹ï¼Œç®€å•æ€»ç»“ä¸€ä¸‹å‡ ç‚¹ï¼š</p><ol><li>ä»æ ¹å®ä¾‹å…¥æ‰‹è¿›è¡Œå®ä¾‹çš„æŒ‚è½½ï¼Œå¦‚æœæœ‰æ‰‹å†™çš„<code>render</code>å‡½æ•°ï¼Œåˆ™ç›´æ¥è¿›å…¥<code>$mount</code>æŒ‚è½½æµç¨‹ã€‚</li><li>åªæœ‰<code>template</code>æ¨¡æ¿åˆ™éœ€è¦å¯¹æ¨¡æ¿è¿›è¡Œè§£æï¼Œè¿™é‡Œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œä¸€ä¸ªæ˜¯å°†æ¨¡æ¿è§£æä¸º<code>AST</code>æ ‘ï¼Œå¦ä¸€ä¸ªæ˜¯æ ¹æ®ä¸åŒå¹³å°ç”Ÿæˆæ‰§è¡Œä»£ç ï¼Œä¾‹å¦‚<code>render</code>å‡½æ•°ã€‚</li><li><code>$mount</code>æµç¨‹ä¹Ÿåˆ†ä¸ºä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥æ˜¯å°†<code>render</code>å‡½æ•°ç”Ÿæˆ<code>Vnode</code>æ ‘ï¼Œå¦‚æœé‡åˆ°å­ç»„ä»¶ä¼šå…ˆç”Ÿæˆå­ç»„ä»¶ï¼Œå­ç»„ä»¶ä¼šä»¥<code>vue-componet-</code>ä¸º<code>tag</code>æ ‡è®°ï¼Œå¦ä¸€æ­¥æ˜¯æŠŠ<code>Vnode</code>æ¸²æŸ“æˆçœŸæ­£çš„DOMèŠ‚ç‚¹ã€‚</li><li>åˆ›å»ºçœŸå®èŠ‚ç‚¹è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°å­çš„å ä½ç¬¦ç»„ä»¶ä¼šè¿›è¡Œå­ç»„ä»¶çš„å®ä¾‹åŒ–è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹åˆå°†å›åˆ°æµç¨‹çš„ç¬¬ä¸€æ­¥ã€‚</li></ol><p>æ¥ä¸‹æ¥æˆ‘ä»¬å¯¹<code>slot</code>çš„åˆ†æå°†å›´ç»•è¿™å››ä¸ªå…·ä½“çš„æµç¨‹å±•å¼€ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="1013-çˆ¶ç»„ä»¶å¤„ç†"></a>10.1.3 çˆ¶ç»„ä»¶å¤„ç†<a class="hash-link" href="#1013-çˆ¶ç»„ä»¶å¤„ç†" title="Direct link to heading">#</a></h3><p>å›åˆ°ç»„ä»¶å®ä¾‹æµç¨‹ä¸­ï¼Œçˆ¶ç»„ä»¶ä¼šä¼˜å…ˆäºå­ç»„ä»¶è¿›è¡Œå®ä¾‹çš„æŒ‚è½½ï¼Œæ¨¡æ¿çš„è§£æå’Œ<code>render</code>å‡½æ•°çš„ç”Ÿæˆé˜¶æ®µåœ¨å¤„ç†ä¸Šæ²¡æœ‰ç‰¹æ®Šçš„å·®å¼‚ï¼Œè¿™é‡Œå°±ä¸å±•å¼€åˆ†æã€‚æ¥ä¸‹æ¥æ˜¯<code>render</code>å‡½æ•°ç”Ÿæˆ<code>Vnode</code>çš„è¿‡ç¨‹ï¼Œåœ¨è¿™ä¸ªé˜¶æ®µä¼šé‡åˆ°å­çš„å ä½ç¬¦èŠ‚ç‚¹(å³ï¼š<code>child</code>),å› æ­¤ä¼šä¸ºå­ç»„ä»¶åˆ›å»ºå­çš„<code>Vnode</code>ã€‚<code>createComponent</code>æ‰§è¡Œäº†åˆ›å»ºå­å ä½èŠ‚ç‚¹<code>Vnode</code>çš„è¿‡ç¨‹ã€‚æˆ‘ä»¬æŠŠé‡ç‚¹æ”¾åœ¨æœ€ç»ˆ<code>Vnode</code>ä»£ç çš„ç”Ÿæˆã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»ºå­Vnodeè¿‡ç¨‹</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createComponent</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">Ctor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// å­ç±»æ„é€ å™¨</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// vmå®ä¾‹</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    children</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// çˆ¶ç»„ä»¶éœ€è¦åˆ†å‘çš„å†…å®¹</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    tag </span><span class="token comment" style="color:#999988;font-style:italic">// å­ç»„ä»¶å ä½ç¬¦</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Â·Â·Â·</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»ºå­vnodeï¼Œå…¶ä¸­çˆ¶ä¿ç•™çš„childrenå±æ€§ä¼šä»¥é€‰é¡¹çš„å½¢å¼ä¼ é€’ç»™Vnode</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> vnode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">VNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;vue-component-&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Ctor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cid</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;-&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">Ctor</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Ctor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> propsData</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> propsData</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> listeners</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> listeners</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tag</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> tag</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> children</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> children </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      asyncFactory</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Vnodeæ„é€ å™¨</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">VNode</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">VNode</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">tag</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">data</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">children</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">text</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">elm</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">context</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">componentOptions</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">asyncFactory</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Â·Â·Â·</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">componentOptions</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> componentOptions</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// å­ç»„ä»¶çš„é€‰é¡¹ç›¸å…³</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>createComponent</code>å‡½æ•°æ¥æ”¶çš„ç¬¬å››ä¸ªå‚æ•°<code>children</code>å°±æ˜¯çˆ¶ç»„ä»¶éœ€è¦åˆ†å‘çš„å†…å®¹ã€‚åœ¨åˆ›å»ºå­<code>Vnode</code>è¿‡ç¨‹ä¸­ï¼Œä¼šä»¥ä¼š<code>componentOptions</code>é…ç½®ä¼ å…¥<code>Vnode</code>æ„é€ å™¨ä¸­ã€‚<strong>æœ€ç»ˆ<code>Vnode</code>ä¸­çˆ¶ç»„ä»¶éœ€è¦åˆ†å‘çš„å†…å®¹ä»¥<code>componentOptions</code>å±æ€§çš„å½¢å¼å­˜åœ¨ï¼Œè¿™æ˜¯æ’æ§½åˆ†æçš„ç¬¬ä¸€æ­¥</strong>ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="1014-å­ç»„ä»¶æµç¨‹"></a>10.1.4 å­ç»„ä»¶æµç¨‹<a class="hash-link" href="#1014-å­ç»„ä»¶æµç¨‹" title="Direct link to heading">#</a></h3><p>çˆ¶ç»„ä»¶çš„æœ€åä¸€ä¸ªé˜¶æ®µæ˜¯å°†<code>Vnode</code>æ¸²æŸ“ä¸ºçœŸæ­£çš„DOMèŠ‚ç‚¹ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°å­<code>Vnode</code>ä¼šä¼˜å…ˆå®ä¾‹åŒ–å­ç»„ä»¶å¹¶è¿›è¡Œä¸€ç³»åˆ—å­ç»„ä»¶çš„æ¸²æŸ“æµç¨‹ã€‚å­ç»„ä»¶åˆå§‹åŒ–ä¼šå…ˆè°ƒç”¨<code>_init</code>æ–¹æ³•ï¼Œå¹¶ä¸”å’Œçˆ¶ç»„ä»¶ä¸åŒçš„æ˜¯ï¼Œå­ç»„ä»¶ä¼šè°ƒç”¨<code>initInternalComponent</code>æ–¹æ³•æ‹¿åˆ°çˆ¶ç»„ä»¶æ‹¥æœ‰çš„ç›¸å…³é…ç½®ä¿¡æ¯ï¼Œå¹¶èµ‹å€¼ç»™å­ç»„ä»¶è‡ªèº«çš„é…ç½®é€‰é¡¹ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// å­ç»„ä»¶çš„åˆå§‹åŒ–</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Vue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">prototype</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">_init</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">_isComponent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">initInternalComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">vm</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">initRender</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">vm</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">initInternalComponent</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">vm</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> opts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> vm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$options</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">vm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">constructor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> parentVnode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">_parentVnode</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    opts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">parent</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">parent</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    opts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">_parentVnode</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> parentVnode</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// componentOptionsä¸ºå­vnodeè®°å½•çš„ç›¸å…³ä¿¡æ¯</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> vnodeComponentOptions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> parentVnode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">componentOptions</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    opts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">propsData</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> vnodeComponentOptions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">propsData</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    opts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">_parentListeners</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> vnodeComponentOptions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">listeners</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// çˆ¶ç»„ä»¶éœ€è¦åˆ†å‘çš„å†…å®¹èµ‹å€¼ç»™å­é€‰é¡¹é…ç½®çš„_renderChildren</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    opts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">_renderChildren</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> vnodeComponentOptions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">children</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    opts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">_componentTag</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> vnodeComponentOptions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">tag</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">render</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      opts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">render</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">render</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      opts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">staticRenderFns</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">staticRenderFns</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>æœ€ç»ˆåœ¨<strong>å­ç»„ä»¶å®ä¾‹çš„é…ç½®ä¸­æ‹¿åˆ°äº†çˆ¶ç»„ä»¶ä¿å­˜çš„åˆ†å‘å†…å®¹ï¼Œè®°å½•åœ¨ç»„ä»¶å®ä¾‹<code>$options._renderChildren</code>ä¸­ï¼Œè¿™æ˜¯ç¬¬äºŒæ­¥çš„é‡ç‚¹</strong>ã€‚</p><p>æ¥ä¸‹æ¥æ˜¯å­ç»„ä»¶çš„å®ä¾‹åŒ–ä¼šè¿›å…¥<code>initRender</code>é˜¶æ®µï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¼š<strong>å°†é…ç½®çš„<code>_renderChildren</code>å±æ€§åšè§„èŒƒåŒ–å¤„ç†ï¼Œå¹¶å°†ä»–èµ‹å€¼ç»™å­å®ä¾‹ä¸Šçš„<code>$slot</code>å±æ€§ï¼Œè¿™æ˜¯ç¬¬ä¸‰æ­¥çš„é‡ç‚¹</strong>ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">initRender</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">vm</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Â·Â·Â·</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  vm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$slots</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">resolveSlots</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">_renderChildren</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> renderContext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">// $slotsæ‹¿åˆ°äº†å­å ä½ç¬¦èŠ‚ç‚¹çš„_renderchildren(å³éœ€è¦åˆ†å‘çš„å†…å®¹)ï¼Œä¿ç•™ä½œä¸ºå­å®ä¾‹çš„å±æ€§</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">resolveSlots</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">children</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// childrenæ˜¯çˆ¶ç»„ä»¶éœ€è¦åˆ†å‘åˆ°å­ç»„ä»¶çš„VnodeèŠ‚ç‚¹ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ²¡æœ‰åˆ†å‘å†…å®¹</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">children </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">children</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> slots </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> l </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> children</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> child </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> children</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> child</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// remove slot attribute if the node is resolved as a Vue slot node</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">attrs</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">attrs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">slot</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">delete</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">attrs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">slot</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// named slots should only be respected if the vnode was rendered in the</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// same context.</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// åˆ†æ”¯1ä¸ºå…·åæ’æ§½çš„é€»è¾‘ï¼Œæ”¾ååˆ†æ</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">child</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">context</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> context </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> child</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">fnContext</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        data </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">slot</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">slot</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> slot </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">slots</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">slots</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">child</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">tag</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;template&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          slot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">apply</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">slot</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> child</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">children</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          slot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">child</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// æ™®é€šæ’æ§½çš„é‡ç‚¹ï¼Œæ ¸å¿ƒé€»è¾‘æ˜¯æ„é€ { default: [children] }å¯¹è±¡è¿”å›</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">slots</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">slots</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">child</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> slots</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>å…¶ä¸­æ™®é€šæ’æ§½çš„å¤„ç†é€»è¾‘æ ¸å¿ƒåœ¨<code>(slots.default || (slots.default = [])).push(child);</code>ï¼Œå³ä»¥æ•°ç»„çš„å½¢å¼èµ‹å€¼ç»™<code>default</code>å±æ€§ï¼Œå¹¶ä»¥<code>$slot</code>å±æ€§çš„å½¢å¼ä¿å­˜åœ¨å­ç»„ä»¶çš„å®ä¾‹ä¸­ã€‚</p><p>éšåå­ç»„ä»¶ä¹Ÿä¼šèµ°æŒ‚è½½çš„æµç¨‹ï¼ŒåŒæ ·ä¼šç»å†<code>template</code>æ¨¡æ¿åˆ°<code>render</code>å‡½æ•°ï¼Œå†åˆ°<code>Vnode</code>,æœ€åæ¸²æŸ“çœŸå®<code>DOM</code>çš„è¿‡ç¨‹ã€‚è§£æ<code>AST</code>é˜¶æ®µï¼Œ<code>slot</code>æ ‡ç­¾å’Œå…¶ä»–æ™®é€šæ ‡ç­¾å¤„ç†ç›¸åŒï¼Œ<strong>ä¸åŒä¹‹å¤„åœ¨äº<code>AST</code>ç”Ÿæˆ<code>render</code>å‡½æ•°é˜¶æ®µï¼Œå¯¹<code>slot</code>æ ‡ç­¾çš„å¤„ç†ï¼Œä¼šä½¿ç”¨<code>_tå‡½æ•°</code>è¿›è¡ŒåŒ…è£¹ã€‚è¿™æ˜¯å…³é”®æ­¥éª¤çš„ç¬¬å››æ­¥</strong></p><p>å­ç»„ä»¶æ¸²æŸ“çš„å¤§è‡´æµç¨‹ç®€å•æ¢³ç†å¦‚ä¸‹:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ast ç”Ÿæˆ renderå‡½æ•°</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> code </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">generate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ast</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// generateå®ç°</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">generate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">ast</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> state </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">CodegenState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> code </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ast </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">genElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ast</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;_c(&quot;div&quot;)&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    render</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;with(this){return &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> code </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;}&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    staticRenderFns</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">staticRenderFns</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// genElementå®ç°</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">genElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">el</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// é’ˆå¯¹slotæ ‡ç­¾çš„å¤„ç†èµ°```genSlot```åˆ†æ”¯</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">el</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">tag</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;slot&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">genSlot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">el</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æ ¸å¿ƒgenSlotåŸç†</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">genSlot</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">el</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// slotNameè®°å½•ç€æ’æ§½çš„å”¯ä¸€æ ‡å¿—åï¼Œé»˜è®¤ä¸ºdefault</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> slotName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> el</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">slotName</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&quot;default&quot;&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœå­ç»„ä»¶çš„æ’æ§½è¿˜æœ‰å­å…ƒç´ ï¼Œåˆ™ä¼šé€’å½’è°ƒæ‰§è¡Œå­å…ƒç´ çš„åˆ›å»ºè¿‡ç¨‹</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> children </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">genChildren</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">el</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// é€šè¿‡_tå‡½æ•°åŒ…è£¹</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;_t(&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> slotName </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">children </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> children</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å…·åæ’æ§½çš„å…¶ä»–å¤„ç†</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Â·Â·Â·    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> res </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;)&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>æœ€ç»ˆå­ç»„ä»¶çš„<code>render</code>å‡½æ•°ä¸ºï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;with(this){return _c(&#x27;div&#x27;,{staticClass:&quot;</span><span class="token plain">child</span><span class="token string" style="color:#e3116c">&quot;},[_t(&quot;</span><span class="token keyword module" style="color:#00009f">default</span><span class="token string" style="color:#e3116c">&quot;)],2)}&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>ç¬¬äº”æ­¥åˆ°äº†å­ç»„ä»¶æ¸²æŸ“ä¸º<code>Vnode</code>çš„è¿‡ç¨‹ã€‚<code>render</code>å‡½æ•°æ‰§è¡Œé˜¶æ®µä¼šæ‰§è¡Œ<code>_t()</code>å‡½æ•°ï¼Œ<code>_t</code>å‡½æ•°æ˜¯<code>renderSlot</code>å‡½æ•°ç®€å†™ï¼Œå®ƒä¼šåœ¨<code>Vnode</code>æ ‘ä¸­è¿›è¡Œåˆ†å‘å†…å®¹çš„æ›¿æ¢</strong>ï¼Œå…·ä½“çœ‹çœ‹å®ç°é€»è¾‘ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// target._t = renderSlot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// renderå‡½æ•°æ¸²æŸ“Vnodeå‡½æ•°</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Vue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">prototype</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">_render</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> _parentVnode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ref</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">_parentVnode</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_parentVnode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// slotsçš„è§„èŒƒåŒ–å¤„ç†å¹¶èµ‹å€¼ç»™$scopedSlotså±æ€§ã€‚</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    vm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$scopedSlots</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">normalizeScopedSlots</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      _parentVnode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">scopedSlots</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      vm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$slots</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// è®°å½•çˆ¶ç»„ä»¶çš„æ’æ§½å†…å®¹</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      vm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$scopedSlots</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>normalizeScopedSlots</code>çš„é€»è¾‘è¾ƒé•¿ï¼Œä½†å¹¶ä¸æ˜¯æœ¬èŠ‚çš„é‡ç‚¹ã€‚æ‹¿åˆ°<code>$scopedSlots</code>å±æ€§åä¼šæ‰§è¡ŒçœŸæ­£çš„<code>render</code>å‡½æ•°,å…¶ä¸­<code>_t</code>çš„æ‰§è¡Œé€»è¾‘å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// æ¸²æŸ“slotç»„ä»¶å†…å®¹</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">renderSlot</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    fallback</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// slotæ’æ§½åå¤‡å†…å®¹(é’ˆå¯¹åå¤‡å†…å®¹)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    props</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// å­ä¼ ç»™çˆ¶çš„å€¼(ä½œç”¨åŸŸæ’æ§½)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    bindObject</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// scopedSlotFnæ‹¿åˆ°çˆ¶ç»„ä»¶æ’æ§½çš„æ‰§è¡Œå‡½æ•°ï¼Œé»˜è®¤slotnameä¸ºdefault</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> scopedSlotFn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$scopedSlots</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> nodes</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å…·åæ’æ§½åˆ†æ”¯(æš‚æ—¶å¿½ç•¥)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scopedSlotFn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// scoped slot</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      props </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> props </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bindObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">isObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bindObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token function" style="color:#d73a49">warn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&#x27;slot v-bind without argument expects an Object&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">this</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        props </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">extend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">extend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> bindObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// æ‰§è¡Œæ—¶å°†å­ç»„ä»¶ä¼ é€’ç»™çˆ¶ç»„ä»¶çš„å€¼ä¼ å…¥fn</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      nodes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">scopedSlotFn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> fallback</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœçˆ¶å ä½ç¬¦ç»„ä»¶æ²¡æœ‰æ’æ§½å†…å®¹ï¼Œthis.$slotsä¸ä¼šæœ‰å€¼ï¼Œæ­¤æ—¶vnodeèŠ‚ç‚¹ä¸ºåå¤‡å†…å®¹èŠ‚ç‚¹ã€‚</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      nodes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$slots</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> fallback</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> target </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> props </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">slot</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">target</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">$createElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;template&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> slot</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> target </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> nodes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> nodes</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>renderSlot</code>æ‰§è¡Œè¿‡ç¨‹ä¼šæ‹¿åˆ°çˆ¶ç»„ä»¶éœ€è¦åˆ†å‘çš„å†…å®¹ï¼Œæœ€ç»ˆ<code>Vnode</code>æ ‘å°†çˆ¶å…ƒç´ çš„æ’æ§½æ›¿æ¢æ‰å­ç»„ä»¶çš„<code>slot</code>ç»„ä»¶ã€‚</p><p><strong>æœ€åä¸€æ­¥å°±æ˜¯å­ç»„ä»¶çœŸå®èŠ‚ç‚¹çš„æ¸²æŸ“äº†ï¼Œè¿™ç‚¹æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«ç‚¹ï¼Œå’Œä»¥å¾€ä»‹ç»çš„æµç¨‹ä¸€è‡´</strong>ã€‚</p><p>è‡³æ­¤ï¼Œä¸€ä¸ªå®Œæ•´ä¸”ç®€å•çš„æ’æ§½æµç¨‹åˆ†æå®Œæ¯•ã€‚æ¥ä¸‹æ¥çœ‹æ’æ§½æ·±å±‚æ¬¡çš„ç”¨æ³•ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="102-å…·æœ‰åå¤‡å†…å®¹çš„æ’æ§½"></a>10.2 å…·æœ‰åå¤‡å†…å®¹çš„æ’æ§½<a class="hash-link" href="#102-å…·æœ‰åå¤‡å†…å®¹çš„æ’æ§½" title="Direct link to heading">#</a></h2><p>æœ‰æ—¶ä¸ºä¸€ä¸ªæ’æ§½è®¾ç½®å…·ä½“çš„åå¤‡ (ä¹Ÿå°±æ˜¯é»˜è®¤çš„) å†…å®¹æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œå®ƒåªä¼šåœ¨æ²¡æœ‰æä¾›å†…å®¹çš„æ—¶å€™è¢«æ¸²æŸ“ã€‚æŸ¥çœ‹æºç å‘ç°åå¤‡å†…å®¹æ’æ§½çš„é€»è¾‘ä¹Ÿå¾ˆå¥½ç†è§£ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> child </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  template</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">&lt;div class=&quot;child&quot;&gt;&lt;slot&gt;åå¤‡å†…å®¹&lt;/slot&gt;&lt;/div&gt;</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> vm </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Vue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  el</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;#app&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  components</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    child</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  template</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">&lt;div id=&quot;app&quot;&gt;&lt;child&gt;&lt;/child&gt;&lt;/div&gt;</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// çˆ¶æ²¡æœ‰æ’æ§½å†…å®¹ï¼Œå­çš„slotä¼šæ¸²æŸ“åå¤‡å†…å®¹</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div </span><span class="token keyword" style="color:#00009f">class</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;child&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">åå¤‡å†…å®¹</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>çˆ¶ç»„ä»¶æ²¡æœ‰éœ€è¦åˆ†å‘çš„å†…å®¹ï¼Œå­ç»„ä»¶ä¼šé»˜è®¤æ˜¾ç¤ºæ’æ§½é‡Œé¢çš„å†…å®¹ã€‚æºç ä¸­çš„ä¸åŒä½“ç°åœ¨ä¸‹é¢çš„å‡ ç‚¹ã€‚</p><ol><li>çˆ¶ç»„ä»¶æ¸²æŸ“è¿‡ç¨‹ç”±äºæ²¡æœ‰éœ€è¦åˆ†å‘çš„å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¸å†éœ€è¦æ‹¥æœ‰<code>componentOptions.children</code>å±æ€§æ¥è®°å½•å†…å®¹ã€‚</li><li>å› æ­¤å­ç»„ä»¶ä¹Ÿæ‹¿ä¸åˆ°<code>$slot</code>å±æ€§çš„å†…å®¹.</li><li>å­ç»„ä»¶çš„<code>render</code>å‡½æ•°æœ€ååœ¨<code>_t</code>å‡½æ•°å‚æ•°ä¼šæºå¸¦ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°ä»¥æ•°ç»„çš„å½¢å¼ä¼ å…¥<code>slot</code>æ’æ§½çš„åå¤‡å†…å®¹ã€‚ä¾‹<code>with(this){return _c(&#x27;div&#x27;,{staticClass:&quot;child&quot;},[_t(&quot;default&quot;,[_v(&quot;test&quot;)])],2)}</code></li><li>æ¸²æŸ“å­<code>Vnode</code>ä¼šæ‰§è¡Œ<code>renderSlot(å³ï¼š_t)</code>å‡½æ•°æ—¶ï¼Œç¬¬äºŒä¸ªå‚æ•°<code>fallback</code>æœ‰å€¼ï¼Œä¸”<code>this.$slots</code>æ²¡å€¼ï¼Œ<code>vnode</code>ä¼šç›´æ¥è¿”å›åå¤‡å†…å®¹ä½œä¸ºæ¸²æŸ“å¯¹è±¡ã€‚</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">renderSlot</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    fallback</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// slotæ’æ§½åå¤‡å†…å®¹(é’ˆå¯¹åå¤‡å†…å®¹)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    props</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// å­ä¼ ç»™çˆ¶çš„å€¼(ä½œç”¨åŸŸæ’æ§½)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    bindObject</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      Â·Â·Â·</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">//fallbackä¸ºåå¤‡å†…å®¹</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœçˆ¶å ä½ç¬¦ç»„ä»¶æ²¡æœ‰æ’æ§½å†…å®¹ï¼Œthis.$slotsä¸ä¼šæœ‰å€¼ï¼Œæ­¤æ—¶vnodeèŠ‚ç‚¹ä¸ºåå¤‡å†…å®¹èŠ‚ç‚¹ã€‚</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      nodes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$slots</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> fallback</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>æœ€ç»ˆï¼Œåœ¨çˆ¶ç»„ä»¶æ²¡æœ‰æä¾›å†…å®¹æ—¶ï¼Œ<code>slot</code>çš„åå¤‡å†…å®¹è¢«æ¸²æŸ“ã€‚</p><p>æœ‰äº†è¿™äº›åŸºç¡€ï¼Œæˆ‘ä»¬å†æ¥çœ‹å®˜ç½‘ç»™çš„ä¸€æ¡è§„åˆ™ã€‚</p><blockquote><p>çˆ¶çº§æ¨¡æ¿é‡Œçš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯åœ¨çˆ¶çº§ä½œç”¨åŸŸä¸­ç¼–è¯‘çš„ï¼›å­æ¨¡æ¿é‡Œçš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯åœ¨å­ä½œç”¨åŸŸä¸­ç¼–è¯‘çš„ã€‚</p></blockquote><p>çˆ¶ç»„ä»¶æ¨¡æ¿çš„å†…å®¹åœ¨çˆ¶ç»„ä»¶ç¼–è¯‘é˜¶æ®µå°±ç¡®å®šäº†,å¹¶ä¸”ä¿å­˜åœ¨<code>componentOptions</code>å±æ€§ä¸­ï¼Œè€Œå­ç»„ä»¶æœ‰è‡ªèº«åˆå§‹åŒ–<code>init</code>çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹åŒæ ·ä¼šè¿›è¡Œå­ä½œç”¨åŸŸçš„æ¨¡æ¿ç¼–è¯‘ï¼Œå› æ­¤ä¸¤éƒ¨åˆ†å†…å®¹æ˜¯ç›¸å¯¹ç‹¬ç«‹çš„ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="103-å…·åæ’æ§½"></a>10.3 å…·åæ’æ§½<a class="hash-link" href="#103-å…·åæ’æ§½" title="Direct link to heading">#</a></h2><p>å¾€å¾€æˆ‘ä»¬éœ€è¦çµæ´»çš„ä½¿ç”¨æ’æ§½è¿›è¡Œé€šç”¨ç»„ä»¶çš„å¼€å‘ï¼Œè¦æ±‚çˆ¶ç»„ä»¶æ¯ä¸ªæ¨¡æ¿å¯¹åº”å­ç»„ä»¶ä¸­æ¯ä¸ªæ’æ§½ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>&lt;slot&gt;</code>çš„<code>name</code>å±æ€§ï¼ŒåŒæ ·ä¸¾ä¸ªç®€å•çš„ä¾‹å­ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> child </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  template</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">&lt;div class=&quot;child&quot;&gt;&lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;&lt;slot name=&quot;footer&quot;&gt;&lt;/slot&gt;&lt;/div&gt;</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> vm </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Vue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  el</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;#app&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  components</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    child</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  template</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">&lt;div id=&quot;app&quot;&gt;&lt;child&gt;&lt;template v-slot:header&gt;&lt;span&gt;å¤´éƒ¨&lt;/span&gt;&lt;/template&gt;&lt;template v-slot:footer&gt;&lt;span&gt;åº•éƒ¨&lt;/span&gt;&lt;/template&gt;&lt;/child&gt;&lt;/div&gt;</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>æ¸²æŸ“ç»“æœï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div </span><span class="token keyword" style="color:#00009f">class</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;child&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">span</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">å¤´éƒ¨</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">span</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">span</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">åº•éƒ¨</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">span</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨æ™®é€šæ’æ§½çš„åŸºç¡€ä¸Šï¼Œçœ‹çœ‹æºç åœ¨å…·åæ’æ§½å®ç°ä¸Šçš„åŒºåˆ«ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="1031-æ¨¡æ¿ç¼–è¯‘çš„å·®åˆ«"></a>10.3.1 æ¨¡æ¿ç¼–è¯‘çš„å·®åˆ«<a class="hash-link" href="#1031-æ¨¡æ¿ç¼–è¯‘çš„å·®åˆ«" title="Direct link to heading">#</a></h3><p>çˆ¶ç»„ä»¶åœ¨ç¼–è¯‘<code>AST</code>é˜¶æ®µå’Œæ™®é€šèŠ‚ç‚¹çš„è¿‡ç¨‹ä¸åŒï¼Œå…·åæ’æ§½ä¸€èˆ¬ä¼šåœ¨<code>template</code>æ¨¡æ¿ä¸­ç”¨<code>v-slot:</code>æ¥æ ‡æ³¨æŒ‡å®šæ’æ§½ï¼Œè¿™ä¸€é˜¶æ®µä¼šåœ¨ç¼–è¯‘é˜¶æ®µç‰¹æ®Šå¤„ç†ã€‚æœ€ç»ˆçš„<code>AST</code>æ ‘ä¼šæºå¸¦<code>scopedSlots</code>ç”¨æ¥è®°å½•å…·åæ’æ§½çš„å†…å®¹</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  scopedSlotsï¼š </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    footer</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Â·Â·Â· </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    header</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Â·Â·Â· </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>AST</code>ç”Ÿæˆ<code>render</code>å‡½æ•°çš„è¿‡ç¨‹ä¹Ÿä¸è¯¦ç»†åˆ†æäº†ï¼Œæˆ‘ä»¬åªåˆ†æçˆ¶ç»„ä»¶æœ€ç»ˆè¿”å›çš„ç»“æœ(å¦‚æœå¯¹<code>parse, generate</code>æ„Ÿå…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥ç›´æ¥çœ‹æºç åˆ†æ,ç¼–è¯‘é˜¶æ®µå†—é•¿ä¸”éš¾ä»¥è®²è§£ï¼Œè·³è¿‡è¿™éƒ¨åˆ†åˆ†æ)</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">with</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">_c</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;div&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">attrs</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;app&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">_c</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;child&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">scopedSlots</span><span class="token operator" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">_u</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">key</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;header&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function-variable function" style="color:#d73a49">fn</span><span class="token operator" style="color:#393A34">:</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">_c</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;span&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">_v</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;å¤´éƒ¨&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">proxy</span><span class="token operator" style="color:#393A34">:</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">key</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;footer&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function-variable function" style="color:#d73a49">fn</span><span class="token operator" style="color:#393A34">:</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">_c</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;span&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">_v</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;åº•éƒ¨&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">proxy</span><span class="token operator" style="color:#393A34">:</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>å¾ˆæ˜æ˜¾ï¼Œçˆ¶ç»„ä»¶çš„æ’æ§½å†…å®¹ç”¨<code>_u</code>å‡½æ•°å°è£…æˆæ•°ç»„çš„å½¢å¼ï¼Œå¹¶èµ‹å€¼åˆ°<code>scopedSlots</code>å±æ€§ä¸­ï¼Œè€Œæ¯ä¸€ä¸ªæ’æ§½ä»¥å¯¹è±¡å½¢å¼æè¿°ï¼Œ<code>key</code>ä»£è¡¨æ’æ§½åï¼Œ<code>fn</code>æ˜¯ä¸€ä¸ªè¿”å›æ‰§è¡Œç»“æœçš„å‡½æ•°ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="1032-çˆ¶ç»„ä»¶vnodeç”Ÿæˆé˜¶æ®µ"></a>10.3.2 çˆ¶ç»„ä»¶vnodeç”Ÿæˆé˜¶æ®µ<a class="hash-link" href="#1032-çˆ¶ç»„ä»¶vnodeç”Ÿæˆé˜¶æ®µ" title="Direct link to heading">#</a></h3><p>ç…§ä¾‹è¿›å…¥çˆ¶ç»„ä»¶ç”Ÿæˆ<code>Vnode</code>é˜¶æ®µï¼Œå…¶ä¸­<code>_u</code>å‡½æ•°çš„åŸå½¢æ˜¯<code>resolveScopedSlots</code>,å…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯æ’æ§½æ•°ç»„ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// vnodeç”Ÿæˆé˜¶æ®µé’ˆå¯¹å…·åæ’æ§½çš„å¤„ç† _u      (target._u = resolveScopedSlots)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">resolveScopedSlots</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">fns</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">res</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">hasDynamicKeys</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">contentHashKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> res </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> $stable</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">hasDynamicKeys </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> fns</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> slot </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fns</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// fnæ˜¯æ•°ç»„éœ€è¦é€’å½’å¤„ç†ã€‚</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">Array</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">isArray</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">slot</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">resolveScopedSlots</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">slot</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> hasDynamicKeys</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">slot</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// marker for reverse proxying v-slot without scope on this.$slots</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">slot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">proxy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//  é’ˆå¯¹proxyçš„å¤„ç†</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          slot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">fn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">proxy</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// æœ€ç»ˆè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä»¥slotnameä½œä¸ºå±æ€§ï¼Œä»¥fnä½œä¸ºå€¼</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        res</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">slot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">key</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> slot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">fn</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">contentHashKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$key</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> contentHashKey</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> res</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>æœ€ç»ˆçˆ¶ç»„ä»¶çš„<code>vnode</code>èŠ‚ç‚¹çš„<code>data</code>å±æ€§ä¸Šå¤šäº†<code>scopedSlots</code>æ•°ç»„ã€‚<strong>å›é¡¾ä¸€ä¸‹ï¼Œå…·åæ’æ§½å’Œæ™®é€šæ’æ§½å®ç°ä¸Šæœ‰æ˜æ˜¾çš„ä¸åŒï¼Œæ™®é€šæ’æ§½æ˜¯ä»¥<code>componentOptions.child</code>çš„å½¢å¼ä¿ç•™åœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œè€Œå…·åæ’æ§½æ˜¯ä»¥<code>scopedSlots</code>å±æ€§çš„å½¢å¼å­˜å‚¨åˆ°<code>data</code>å±æ€§ä¸­ã€‚</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// vnode</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  scopedSlots</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;header&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> fn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;footer&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> fn</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="1033-å­ç»„ä»¶æ¸²æŸ“vnodeè¿‡ç¨‹"></a>10.3.3 å­ç»„ä»¶æ¸²æŸ“Vnodeè¿‡ç¨‹<a class="hash-link" href="#1033-å­ç»„ä»¶æ¸²æŸ“vnodeè¿‡ç¨‹" title="Direct link to heading">#</a></h3><p>å­ç»„ä»¶åœ¨è§£ææˆ<code>AST</code>æ ‘é˜¶æ®µçš„ä¸åŒï¼Œåœ¨äºå¯¹<code>slot</code>æ ‡ç­¾çš„<code>name</code>å±æ€§çš„è§£æ,è€Œåœ¨<code>render</code>ç”Ÿæˆ<code>Vnode</code>è¿‡ç¨‹ä¸­ï¼Œ<code>slot</code>çš„è§„èŒƒåŒ–å¤„ç†é’ˆå¯¹å…·åæ’æ§½ä¼šè¿›è¡Œç‰¹æ®Šçš„å¤„ç†ï¼Œå›åˆ°<code>normalizeScopedSlots</code>çš„ä»£ç </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">vm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$scopedSlots</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">normalizeScopedSlots</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  _parentVnode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">scopedSlots</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æ­¤æ—¶çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼šæ‹¿åˆ°çˆ¶ç»„ä»¶æ’æ§½ç›¸å…³çš„æ•°æ®</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  vm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$slots</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// è®°å½•çˆ¶ç»„ä»¶çš„æ’æ§½å†…å®¹</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  vm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$scopedSlots</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>æœ€ç»ˆå­ç»„ä»¶å®ä¾‹ä¸Šçš„<code>$scopedSlots</code>å±æ€§ä¼šæºå¸¦çˆ¶ç»„ä»¶æ’æ§½ç›¸å…³çš„å†…å®¹ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// å­ç»„ä»¶Vnode</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  $scopedSlots</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;header&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;footer&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> f</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="1034-å­ç»„ä»¶æ¸²æŸ“çœŸå®dom"></a>10.3.4 å­ç»„ä»¶æ¸²æŸ“çœŸå®dom<a class="hash-link" href="#1034-å­ç»„ä»¶æ¸²æŸ“çœŸå®dom" title="Direct link to heading">#</a></h3><p>å’Œæ™®é€šæ’æ§½ç±»ä¼¼ï¼Œå­ç»„ä»¶æ¸²æŸ“çœŸå®èŠ‚ç‚¹çš„è¿‡ç¨‹ä¼šæ‰§è¡Œå­<code>render</code>å‡½æ•°ä¸­çš„<code>_t</code>æ–¹æ³•ï¼Œè¿™éƒ¨åˆ†çš„æºç ä¼šå’Œæ™®é€šæ’æ§½èµ°ä¸åŒçš„åˆ†æ”¯ï¼Œå…¶ä¸­<code>this.$scopedSlots</code>æ ¹æ®ä¸Šé¢åˆ†æä¼šè®°å½•ç€çˆ¶ç»„ä»¶æ’æ§½å†…å®¹ç›¸å…³çš„æ•°æ®ï¼Œæ‰€ä»¥ä¼šå’Œæ™®é€šæ’æ§½èµ°ä¸åŒçš„åˆ†æ”¯ã€‚è€Œæœ€ç»ˆçš„æ ¸å¿ƒæ˜¯æ‰§è¡Œ<code>nodes = scopedSlotFn(props)</code>,ä¹Ÿå°±æ˜¯æ‰§è¡Œ<code>function(){return [_c(&#x27;span&#x27;,[_v(&quot;å¤´éƒ¨&quot;)])]}</code>,å…·åæ’æ§½ä¹‹æ‰€ä»¥æ˜¯å‡½æ•°çš„å½¢å¼æ‰§è¡Œè€Œä¸æ˜¯ç›´æ¥è¿”å›ç»“æœï¼Œæˆ‘ä»¬åœ¨åé¢æ­æ™“ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">renderSlot</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    fallback</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// slotæ’æ§½åå¤‡å†…å®¹</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    props</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// å­ä¼ ç»™çˆ¶çš„å€¼</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    bindObject</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> scopedSlotFn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$scopedSlots</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> nodes</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// é’ˆå¯¹å…·åæ’æ§½ï¼Œç‰¹ç‚¹æ˜¯$scopedSlotsæœ‰å€¼</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scopedSlotFn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// scoped slot</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      props </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> props </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bindObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">isObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bindObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token function" style="color:#d73a49">warn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;slot v-bind without argument expects an Object&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        props </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">extend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">extend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> bindObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// æ‰§è¡Œæ—¶å°†å­ç»„ä»¶ä¼ é€’ç»™çˆ¶ç»„ä»¶çš„å€¼ä¼ å…¥fn</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      nodes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">scopedSlotFn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> fallback</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">Â·Â·Â·</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>è‡³æ­¤å­ç»„ä»¶é€šè¿‡<code>slotName</code>æ‰¾åˆ°äº†å¯¹åº”çˆ¶ç»„ä»¶çš„æ’æ§½å†…å®¹ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="104-ä½œç”¨åŸŸæ’æ§½"></a>10.4 ä½œç”¨åŸŸæ’æ§½<a class="hash-link" href="#104-ä½œç”¨åŸŸæ’æ§½" title="Direct link to heading">#</a></h2><p>æœ€åè¯´è¯´ä½œç”¨åŸŸæ’æ§½ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä½œç”¨åŸŸæ’æ§½è®©çˆ¶ç»„ä»¶çš„æ’æ§½å†…å®¹è®¿é—®åˆ°å­ç»„ä»¶çš„æ•°æ®ï¼Œå…·ä½“çš„ç”¨æ³•æ˜¯åœ¨å­ç»„ä»¶ä¸­ä»¥å±æ€§çš„æ–¹å¼è®°å½•åœ¨å­ç»„ä»¶ä¸­ï¼Œçˆ¶ç»„ä»¶é€šè¿‡<code>v-slot:[name]=[props]</code>çš„å½¢å¼æ‹¿åˆ°å­ç»„ä»¶ä¼ é€’çš„å€¼ã€‚å­ç»„ä»¶<code>&lt;slot&gt;</code>å…ƒç´ ä¸Šçš„ç‰¹æ€§ç§°ä¸º<strong>æ’æ§½<code>Props</code></strong>,å¦å¤–ï¼Œvue2.6ä»¥åçš„ç‰ˆæœ¬å·²ç»å¼ƒç”¨äº†<code>slot-scoped</code>ï¼Œé‡‡ç”¨<code>v-slot</code>ä»£æ›¿ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> child </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  template</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">&lt;div&gt;&lt;slot :user=&quot;user&quot;&gt;&lt;/div&gt;</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      user</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        firstname</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;test&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> vm </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Vue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  el</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;#app&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  components</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    child</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  template</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">&lt;div id=&quot;app&quot;&gt;&lt;child&gt;&lt;template v-slot:default=&quot;slotProps&quot;&gt;{{slotProps.user.firstname}}&lt;/template&gt;&lt;/child&gt;&lt;/div&gt;</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ä½œç”¨åŸŸæ’æ§½å’Œå…·åæ’æ§½çš„åŸç†ç±»ä¼¼ï¼Œæˆ‘ä»¬æ¥ç€å¾€ä¸‹çœ‹ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="1041-çˆ¶ç»„ä»¶ç¼–è¯‘é˜¶æ®µ"></a>10.4.1 çˆ¶ç»„ä»¶ç¼–è¯‘é˜¶æ®µ<a class="hash-link" href="#1041-çˆ¶ç»„ä»¶ç¼–è¯‘é˜¶æ®µ" title="Direct link to heading">#</a></h3><p>ä½œç”¨åŸŸæ’æ§½å’Œå…·åæ’æ§½åœ¨çˆ¶ç»„ä»¶çš„ç”¨æ³•åŸºæœ¬ç›¸åŒï¼ŒåŒºåˆ«åœ¨äº<code>v-slot</code>å®šä¹‰äº†ä¸€ä¸ªæ’æ§½<code>props</code>çš„åå­—ï¼Œå‚è€ƒå¯¹äºå…·åæ’æ§½çš„åˆ†æï¼Œç”Ÿæˆ<code>render</code>å‡½æ•°é˜¶æ®µ<code>fn</code>å‡½æ•°ä¼šæºå¸¦<code>props</code>å‚æ•°ä¼ å…¥ã€‚å³ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">with</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">_c</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;div&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">attrs</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;app&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">_c</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;child&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">scopedSlots</span><span class="token operator" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">_u</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">key</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;default&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function-variable function" style="color:#d73a49">fn</span><span class="token operator" style="color:#393A34">:</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">slotProps</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">_v</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">_s</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">slotProps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">firstname</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="1042-å­ç»„ä»¶æ¸²æŸ“"></a>10.4.2 å­ç»„ä»¶æ¸²æŸ“<a class="hash-link" href="#1042-å­ç»„ä»¶æ¸²æŸ“" title="Direct link to heading">#</a></h3><p>åœ¨å­ç»„ä»¶ç¼–è¯‘é˜¶æ®µï¼Œ<code>:user=&quot;user&quot;</code>ä¼šä»¥å±æ€§çš„å½¢å¼è§£æï¼Œæœ€ç»ˆåœ¨<code>render</code>å‡½æ•°ç”Ÿæˆé˜¶æ®µä»¥å¯¹è±¡å‚æ•°çš„å½¢å¼ä¼ é€’<code>_t</code>å‡½æ•°ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">with</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">_c</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;div&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">_t</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;default&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;user&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>å­ç»„ä»¶æ¸²æŸ“Vnodeé˜¶æ®µï¼Œæ ¹æ®å‰é¢åˆ†æä¼šæ‰§è¡Œ<code>renderSlot</code>å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å‰é¢åˆ†æè¿‡ï¼Œå¯¹äºä½œç”¨åŸŸæ’æ§½çš„å¤„ç†ï¼Œé›†ä¸­ä½“ç°åœ¨å‡½æ•°ä¼ å…¥çš„ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// æ¸²æŸ“slotç»„ä»¶vnode</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">renderSlot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  fallback</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  props</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// å­ä¼ ç»™çˆ¶çš„å€¼ { user: user }</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  bindObject</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// scopedSlotFnæ‹¿åˆ°çˆ¶ç»„ä»¶æ’æ§½çš„æ‰§è¡Œå‡½æ•°ï¼Œé»˜è®¤slotnameä¸ºdefault</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> scopedSlotFn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$scopedSlots</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> nodes</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å…·åæ’æ§½åˆ†æ”¯</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scopedSlotFn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// scoped slot</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      props </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> props </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bindObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">isObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bindObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token function" style="color:#d73a49">warn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&#x27;slot v-bind without argument expects an Object&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">this</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// åˆå¹¶props</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        props </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">extend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">extend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> bindObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// æ‰§è¡Œæ—¶å°†å­ç»„ä»¶ä¼ é€’ç»™çˆ¶ç»„ä»¶çš„å€¼ä¼ å…¥fn</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      nodes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">scopedSlotFn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> fallback</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>æœ€ç»ˆå°†å­ç»„ä»¶çš„æ’æ§½<code>props</code>ä½œä¸ºå‚æ•°ä¼ é€’ç»™æ‰§è¡Œå‡½æ•°æ‰§è¡Œã€‚<strong>å›è¿‡å¤´çœ‹çœ‹ä¸ºä»€ä¹ˆå…·åæ’æ§½æ˜¯å‡½æ•°çš„å½¢å¼æ‰§è¡Œè€Œä¸æ˜¯ç›´æ¥è¿”å›ç»“æœã€‚å­¦å®Œä½œç”¨åŸŸæ’æ§½æˆ‘ä»¬å‘ç°è¿™å°±æ˜¯è®¾è®¡å·§å¦™çš„åœ°æ–¹ï¼Œå‡½æ•°çš„å½¢å¼è®©æ‰§è¡Œè¿‡ç¨‹æ›´åŠ çµæ´»ï¼Œä½œç”¨åŸŸæ’æ§½åªéœ€è¦ä»¥å‚æ•°çš„å½¢å¼å°†æ’æ§½<code>props</code>ä¼ å…¥ä¾¿å¯ä»¥å¾—åˆ°æƒ³è¦çš„ç»“æœã€‚</strong></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="1043-æ€è€ƒ"></a>10.4.3 æ€è€ƒ<a class="hash-link" href="#1043-æ€è€ƒ" title="Direct link to heading">#</a></h3><p>ä½œç”¨åŸŸæ’æ§½è¿™ä¸ªæ¦‚å¿µä¸€å¼€å§‹æˆ‘å¾ˆéš¾ç†è§£ï¼Œå•çº¯ä»å®šä¹‰å’Œæºç çš„ç»“è®ºä¸Šçœ‹ï¼Œçˆ¶ç»„ä»¶çš„æ’æ§½å†…å®¹å¯ä»¥è®¿é—®åˆ°å­ç»„ä»¶çš„æ•°æ®ï¼Œè¿™ä¸æ˜¯æ˜æ˜¾çš„å­çˆ¶ä¹‹é—´çš„ä¿¡æ¯é€šä¿¡å—ï¼Œåœ¨äº‹ä»¶ç« èŠ‚æˆ‘ä»¬çŸ¥é“ï¼Œå­çˆ¶ç»„ä»¶ä¹‹é—´çš„é€šä¿¡å®Œå…¨å¯ä»¥é€šè¿‡äº‹ä»¶<code>$emit,$on</code>çš„å½¢å¼æ¥å®Œæˆï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜éœ€è¦å¢åŠ ä¸€ä¸ªæ’æ§½<code>props</code>çš„æ¦‚å¿µå‘¢ã€‚æˆ‘ä»¬çœ‹çœ‹ä½œè€…çš„è§£é‡Šã€‚</p><blockquote><p>æ’æ§½ <code>prop</code> å…è®¸æˆ‘ä»¬å°†æ’æ§½è½¬æ¢ä¸ºå¯å¤ç”¨çš„æ¨¡æ¿ï¼Œè¿™äº›æ¨¡æ¿å¯ä»¥åŸºäºè¾“å…¥çš„ <code>prop</code> æ¸²æŸ“å‡ºä¸åŒçš„å†…å®¹</p></blockquote><p>ä»æˆ‘è‡ªèº«çš„è§’åº¦ç†è§£ï¼Œä½œç”¨åŸŸæ’æ§½æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œå½“ä½ éœ€è¦å°è£…ä¸€ä¸ªé€šç”¨ï¼Œå¯å¤ç”¨çš„é€»è¾‘æ¨¡å—ï¼Œå¹¶ä¸”è¿™ä¸ªæ¨¡å—ç»™å¤–éƒ¨ä½¿ç”¨è€…æä¾›äº†ä¸€ä¸ªä¾¿åˆ©ï¼Œå…è®¸ä½ åœ¨ä½¿ç”¨ç»„ä»¶æ—¶è‡ªå®šä¹‰éƒ¨åˆ†å¸ƒå±€ï¼Œè¿™æ—¶å€™ä½œç”¨åŸŸæ’æ§½å°±æ´¾ä¸Šå¤§ç”¨åœºäº†ï¼Œå†åˆ°å…·ä½“çš„æ€æƒ³ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹å‡ ä¸ªå·¥å…·åº“<a href="https://github.com/Akryum/vue-virtual-scroller" target="_blank" rel="noopener noreferrer">Vue Virtual Scroller</a>, <a href="https://github.com/posva/vue-promised" target="_blank" rel="noopener noreferrer">Vue Promised</a>å¯¹è¿™ä¸€æ€æƒ³çš„åº”ç”¨ã€‚</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_13-_"><span class="theme-last-updated">Last updated on <b><time datetime="2022-10-24T06:26:17.000Z">10/24/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog-vue-source/æ­ç§˜Vueçš„äº‹ä»¶æœºåˆ¶"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« æ­ç§˜Vueçš„äº‹ä»¶æœºåˆ¶</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog-vue-source/ä½ çœŸçš„äº†è§£v-modelçš„è¯­æ³•ç³–äº†å—"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ä½ çœŸçš„äº†è§£v-modelçš„è¯­æ³•ç³–äº†å— Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#101-æ™®é€šæ’æ§½" class="table-of-contents__link">10.1 æ™®é€šæ’æ§½</a><ul><li><a href="#1011-åŸºç¡€ç”¨æ³•" class="table-of-contents__link">10.1.1 åŸºç¡€ç”¨æ³•</a></li><li><a href="#1012-ç»„ä»¶æŒ‚è½½åŸç†" class="table-of-contents__link">10.1.2 ç»„ä»¶æŒ‚è½½åŸç†</a></li><li><a href="#1013-çˆ¶ç»„ä»¶å¤„ç†" class="table-of-contents__link">10.1.3 çˆ¶ç»„ä»¶å¤„ç†</a></li><li><a href="#1014-å­ç»„ä»¶æµç¨‹" class="table-of-contents__link">10.1.4 å­ç»„ä»¶æµç¨‹</a></li></ul></li><li><a href="#102-å…·æœ‰åå¤‡å†…å®¹çš„æ’æ§½" class="table-of-contents__link">10.2 å…·æœ‰åå¤‡å†…å®¹çš„æ’æ§½</a></li><li><a href="#103-å…·åæ’æ§½" class="table-of-contents__link">10.3 å…·åæ’æ§½</a><ul><li><a href="#1031-æ¨¡æ¿ç¼–è¯‘çš„å·®åˆ«" class="table-of-contents__link">10.3.1 æ¨¡æ¿ç¼–è¯‘çš„å·®åˆ«</a></li><li><a href="#1032-çˆ¶ç»„ä»¶vnodeç”Ÿæˆé˜¶æ®µ" class="table-of-contents__link">10.3.2 çˆ¶ç»„ä»¶vnodeç”Ÿæˆé˜¶æ®µ</a></li><li><a href="#1033-å­ç»„ä»¶æ¸²æŸ“vnodeè¿‡ç¨‹" class="table-of-contents__link">10.3.3 å­ç»„ä»¶æ¸²æŸ“Vnodeè¿‡ç¨‹</a></li><li><a href="#1034-å­ç»„ä»¶æ¸²æŸ“çœŸå®dom" class="table-of-contents__link">10.3.4 å­ç»„ä»¶æ¸²æŸ“çœŸå®dom</a></li></ul></li><li><a href="#104-ä½œç”¨åŸŸæ’æ§½" class="table-of-contents__link">10.4 ä½œç”¨åŸŸæ’æ§½</a><ul><li><a href="#1041-çˆ¶ç»„ä»¶ç¼–è¯‘é˜¶æ®µ" class="table-of-contents__link">10.4.1 çˆ¶ç»„ä»¶ç¼–è¯‘é˜¶æ®µ</a></li><li><a href="#1042-å­ç»„ä»¶æ¸²æŸ“" class="table-of-contents__link">10.4.2 å­ç»„ä»¶æ¸²æŸ“</a></li><li><a href="#1043-æ€è€ƒ" class="table-of-contents__link">10.4.3 æ€è€ƒ</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022, Power By <a href="https://www.docusaurus.cn/">Docusaurus</a>.</div></div></div></footer></div>
<script src="/blog-vue-source/assets/js/runtime~main.0ee6c1f0.js"></script>
<script src="/blog-vue-source/assets/js/main.d722cc53.js"></script>
</body>
</html>